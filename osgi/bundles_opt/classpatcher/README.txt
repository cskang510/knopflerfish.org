Needs to be updated to use modern asm lib
